{
  "stages":{
    "prereq":{
      "shell":[
        "npm install oauthio --save",
        "npm install cors --save",
        "npm install express-session --save"
      ]
    },
    "serve":{
      "shell":[
        "export $(cat ./.env | grep -v ^# | xargs)",
        "npm start"
      ]
    },
    "docker-run":{
      "shell":[
        "export $(cat ./.env | grep -v ^# | xargs)",
        "docker build --build-arg STATIC_AUTH_HOSTNAME=$STATIC_AUTH_HOSTNAME \\",
        "             --build-arg STATIC_AUTH_PORT=$STATIC_AUTH_PORT \\",
        "             --build-arg STATIC_AUTH_PORTS=$STATIC_AUTH_PORTS \\",
        "             -t attlas-auth:latest .",
        "docker run -d --rm -p $STATIC_AUTH_PORT:$STATIC_AUTH_PORT -p $STATIC_AUTH_PORTS:$STATIC_AUTH_PORTS --name attlas-auth attlas-auth:latest"
      ]
    },
    "docker-stop":{
      "shell":[
        "docker stop attlas-auth",
        "docker rmi attlas-auth:latest"
      ]
    }
  }
}