FROM node:9.8.0-alpine

ARG SERVICES_COMPARATOR_HOST
ARG SERVICES_COMPARATOR_PORT
ARG SERVICES_COMPARATOR_PORTS

ENV SERVICES_COMPARATOR_HOST $SERVICES_COMPARATOR_HOST
ENV SERVICES_COMPARATOR_PORT $SERVICES_COMPARATOR_PORT
ENV SERVICES_COMPARATOR_PORTS $SERVICES_COMPARATOR_PORTS


# Create app directory
WORKDIR /usr/src/app

# Copy sources
COPY package*.json ./
COPY ./src ./src

# Install app dependencies
#RUN npm install
RUN npm install --only=production

EXPOSE $SERVICES_COMPARATOR_PORT
EXPOSE $SERVICES_COMPARATOR_PORTS

CMD [ "npm", "start" ]