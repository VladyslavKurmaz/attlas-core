{
  "stages":{
    "test":{
      "shell":[
        "export $(cat ./../../.env | grep -v ^# | xargs)",
        "export SERVICES_COMPARATOR_HOST=$(ipconfig getifaddr en0)",
        "npm test"
      ]
    },
    "serve":{
      "shell":[
        "export $(cat ./../../.env | grep -v ^# | xargs)",
        "export SERVICES_COMPARATOR_HOST=$(ipconfig getifaddr en0)",
        "#printenv | grep SERVICES",
        "npm run dev"
      ]
    },
    "run":{
      "shell":[
        "export $(cat ./../../.env | grep -v ^# | xargs)",
        "export NODE_ENV=production",
        "npm start"
      ]
    },
    "docker-run":{
      "shell":[
        "export $(cat ./../../.env | grep -v ^# | xargs)",
        "docker build --build-arg SERVICES_COMPARATOR_HOST=$SERVICES_COMPARATOR_HOST \\",
        "             --build-arg SERVICES_COMPARATOR_LSTN=$SERVICES_COMPARATOR_LSTN \\",
        "             --build-arg SERVICES_COMPARATOR_PORT=$SERVICES_COMPARATOR_PORT \\",
        "             --build-arg SERVICES_COMPARATOR_PORTS=$SERVICES_COMPARATOR_PORTS \\",
        "             -t attlas-auth:${PROJECT_VERSION} .",
        "docker run -d --rm -p $SERVICES_COMPARATOR_PORT:$SERVICES_COMPARATOR_PORT -p $SERVICES_COMPARATOR_PORTS:$SERVICES_COMPARATOR_PORTS --name attlas-comparator attlas-comparator:${PROJECT_VERSION}"
      ]
    },
    "docker-stop":{
      "shell":[
        "export $(cat ./../../.env | grep -v ^# | xargs)",
        "docker stop attlas-comparator",
        "docker rmi attlas-comparator:${PROJECT_VERSION}"
      ]
    }
  }
}